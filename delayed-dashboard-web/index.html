<!DOCTYPE html>
<!--
  ~ Copyright 2017 Red Hat, Inc.
  ~
  ~ Red Hat licenses this file to you under the Apache License, version 2.0
  ~ (the "License"); you may not use this file except in compliance with the
  ~ License.  You may obtain a copy of the License at:
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
  ~ License for the specific language governing permissions and limitations
  ~ under the License.
  -->

<!--[if IE 9]>
<html lang="en-us" class="ie9 layout-pf layout-pf-fixed"><![endif]-->
<!--[if gt IE 9]><!-->
<html lang="en-us" class="layout-pf">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Streaming Data Workshop</title>

  <link rel="stylesheet" href="node_modules/patternfly/dist/css/patternfly.min.css">
  <link rel="stylesheet" href="node_modules/patternfly/dist/css/patternfly-additions.min.css">

  <script src="https://cdn.jsdelivr.net/sockjs/1.0.3/sockjs.min.js"></script>
  <script src="node_modules/vertx3-eventbus-client/vertx-eventbus.js"></script>

  <!-- jQuery -->
  <script src="node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

  <!-- Bootstrap JS -->
  <script src="node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

  <!-- C3, D3 - Charting Libraries -->
  <script src="node_modules/patternfly/node_modules/c3/c3.min.js"></script>
  <script src="node_modules/patternfly/node_modules/d3/d3.min.js"></script>

  <!-- Datatables, jQuery Grid Component -->
  <!-- Note: jquery.dataTables.js must occur in the html source before patternfly*.js.-->
  <script src="node_modules/patternfly/node_modules/datatables.net/js/jquery.dataTables.js"></script>
  <script src="node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
  <script src="node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>
  <script src="node_modules/patternfly/dist/js/patternfly.dataTables.pfPagination.min.js"></script>

  <!-- PatternFly Custom Componets -  Sidebar, Popovers and Datatables Customizations -->
  <!-- Note: jquery.dataTables.js must occur in the html source before patternfly*.js.-->
  <script src="node_modules/patternfly/dist/js/patternfly.min.js"></script>

  <!-- Bootstrap Combobox -->
  <script src="node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

  <!-- Bootstrap Date Picker -->
  <script src="node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

  <!-- Moment - required by Bootstrap Date Time Picker -->
  <script src="node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

  <!-- Bootstrap Date Time Picker - requires Moment -->
  <script src="node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

  <!-- Bootstrap Select -->
  <script src="node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

  <!-- Bootstrap Switch -->
  <script src="node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

  <!-- Bootstrap Touchspin -->
  <script src="node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

  <!-- Bootstrap Tree View -->
  <script src="node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

  <!-- Google Code Prettify - Syntax highlighting of code snippets -->
  <script src="node_modules/patternfly/node_modules/google-code-prettify/bin/prettify.min.js"></script>

  <!-- MatchHeight - Used to make sure dashboard cards are the same height -->
  <script src="node_modules/patternfly/node_modules/jquery-match-height/jquery.matchHeight.js"></script>

  <!-- Angular Application? You May Want to Consider Pulling Angular-PatternFly And Angular-UI Bootstrap instead of bootstrap.js -->
  <!-- See https://github.com/patternfly/angular-patternfly for more information -->

  <script>
    $(document).ready(function () {

      $(".datatable").dataTable();

      // DataTable Config
      var table = $("#table1").DataTable({
        columns: [
          {data: "type"},
          {data: "departure"},
          {data: "station"},
          {data: "destination"},
          {data: "delay"},
          {data: "trainName"}
        ],
        dom: "t",
        language: {
          zeroRecords: "No records found"
        },
        order: [[1, "desc"]],
        pfConfig: {
          paginationSelector: "#pagination1",
          toolbarSelector: "#toolbar1"
        }
      });

      $("#startButton").click(function () {
        var eb = new EventBus("http://delayed-listener-myproject.127.0.0.1.nip.io/eventbus");
        eb.enableReconnect(true);
        eb.onopen = function () {
          eb.registerHandler("delayed-trains", function (error, message) {
            table.row.add(message.body).draw();
          });
        }
      });

    });
  </script>

</head>

<body>
<!-- Navbar -->
<nav class="navbar navbar-default navbar-pf" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="index.html">
      <span>Streaming Data Workshop</span>
    </a>
  </div>
</nav>
<!-- Toolbar -->
<div class="row toolbar-pf table-view-pf-toolbar" id="toolbar1">
  <div class="col-sm-12">
    <form class="toolbar-pf-actions">
      <div class="toolbar-pf-action-right">
        <div class="form-group toolbar-pf-find">
          <button class="btn btn-info" type="button" id="startButton">Start</button>
        </div>
      </div>
    </form>
  </div>
</div>
<!-- Table HTML -->
<table class="table table-striped table-bordered table-hover" id="table1">
  <thead>
  <tr>
    <th>Type</th>
    <th>Departure</th>
    <th>Station</th>
    <th>Destination</th>
    <th>Delay</th>
    <th>Train Name</th>
  </tr>
  </thead>
</table>
<form class="content-view-pf-pagination table-view-pf-pagination clearfix" id="pagination1">
  <div class="form-group">
    <select class="selectpicker pagination-pf-pagesize">
      <option value="15" selected="selected">15</option>
      <option value="25">25</option>
      <option value="50">50</option>
    </select>
    <span>per page</span>
  </div>
  <div class="form-group">
    <ul class="pagination pagination-pf-back">
      <li class="disabled"><a href="#" title="First Page"><span class="i fa fa-angle-double-left"></span></a></li>
      <li class="disabled"><a href="#" title="Previous Page"><span class="i fa fa-angle-left"></span></a></li>
    </ul>
    <span><span class="pagination-pf-items-current">1-15</span> of <span class="pagination-pf-items-total">75</span></span>
    <ul class="pagination pagination-pf-forward">
      <li><a href="#" title="Next Page"><span class="i fa fa-angle-right"></span></a></li>
      <li><a href="#" title="Last Page"><span class="i fa fa-angle-double-right"></span></a></li>
    </ul>
  </div>
</form>
</body>
</html>
